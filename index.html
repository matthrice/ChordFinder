<!DOCTYPE html>
<html>
	<head>
		<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>Chord Finder</title>
		<meta name="description" content="">
		<meta name="vieport" content="width=device-width">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<link rel="stylesheet" href="main.css">
	</head>
	<body>
		<div class="container">
			<div class="jumbotron">
				<h1 class="text text-center">Chord Finder</h1>
				<p class="lead text text-center">For Piano</p>
			</div>
		</div>
		<ul class="set" id="piano">
			<li class="white" id="C"></li>
			<li class="black" id="D♭"></li>
			<li class="white" id="D"></li>
			<li class="black" id="E♭"></li>
			<li class="white" id="E"></li>
			<li class="white" id="F"></li>
			<li class="black" id="G♭"></li>
			<li class="white" id="G"></li>
			<li class="black" id="A♭"></li>
			<li class="white" id="A"></li>
			<li class="black" id="B♭"></li>
			<li class="white" id="B"></li>
			<li class="white" id="C"></li>
			<li class="black" id="D♭"></li>
			<li class="white" id="D"></li>
			<li class="black" id="E♭"></li>
			<li class="white" id="E"></li>
			<li class="white" id="F"></li>
			<li class="black" id="G♭"></li>
			<li class="white" id="G"></li>
			<li class="black" id="A♭"></li>
			<li class="white" id="A"></li>
			<li class="black" id="B♭"></li>
			<li class="white" id="B"></li>
		</ul>
		<div class="row col-centered">
			<div class="col-xs-3"></div>
			<div class="col-xs-3">
				<button type="button" class="btn btn-primary btn-block" id="GO">
					<strong>Find Chord</strong>
				</button>
			</div>
			<div class="col-xs-3">
				<button type="button" class="btn btn-primary btn-block" id="Clear">
					<strong>Clear</strong>
				</button>
			</div>
			<div class="col-xs-3"></div>
		</div>
		<div class="container">
			<h1 class="text center-block chordbox"></h1>
		</div>

		<script src="main.js"></script>
		<script type="text/javascript">
			$("document").ready(function() {
				var positions = [];
				var root_note = "";
				var formation = {num_inversions: 0, shape: ""};
				$("#piano li").click(function() {
					$(this).toggleClass("highlighted");
				});
				$("#GO").on("click", function() {
					$(".highlighted").each(function() {
						positions.push($(this).index('li'));
					});
					// removes octaves and redundancies and identifies formation
					positions = removeOctaves(positions);
					formation = findChord(positions);
					// ensures the chord exists before finding root note
					if (formation.num_inversions >= 0) {
						var key_location = positions[formation.num_inversions] + 1;
						root_note = $("#piano li:nth-child(" + key_location + ")").attr('id');
						$(".chordbox").text(root_note + " " + formation.shape);
					}
					else {
						$(".chordbox").text("Does not exist");
					}
					formation.num_inversions = 0;
					positions.length = 0;
					formation.shape = "";
				});
				$("#Clear").on("click", function() {
					$(".highlighted").removeClass("highlighted");
					$(".chordbox").text("");
				})
			});
		</script>
	</body>
</html>